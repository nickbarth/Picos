pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
poke(0x5f2c,3)

make_parallax = function(x, y, frame, width, height)
    local self = {
        x = x,
        y = y,
        frame = frame,
        width = width,
        height = height,
        original_x = x
    }

    self.update = function()
        self.x = self.x - 1

        if self.x == (self.original_x - (self.width * 8)) then self.x = self.original_x end
    end

    self.draw = function()
        for _x=0, (8 / self.width) do
            spr(self.frame, self.x+(_x*(self.width * 8)), self.y, self.width, self.height)
        end
    end

    return self
end

make_floor = function(x, y)
    return make_parallax(x, y, 7, 1, 4)
end

make_cityscape = function(x, y)
    return make_parallax(x, y, 3, 4, 4)
end

make_hills = function(x, y)
    return make_parallax(x, y, 72, 8, 2)
end

make_clouds = function(x, y)
    return make_parallax(x, y, 64, 8, 2)
end

function _init()
    floor = make_floor(0, 42)
    clouds = make_clouds(0, 20)
    city = make_cityscape(0, 22)
    hills = make_hills(0, 40)
end

function _update()
    floor:update()
    clouds:update()
    city:update()
    hills:update()
end

function _draw()
    cls(12)
    floor:draw()
    clouds:draw()
    city:draw()
    hills:draw()
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000008885800088858000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700088975800889758000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000668999998889999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000666999996669999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700666eeee0666eeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000088eeee0066eeee0000555555555000000000005555555000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000566666665000000000005666665000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000056dd6dd6500000000000566dd65000000000000000000000000000000000000000000000000000000000000000000000000000
000000000ff99999999999900056dd6dd650000000000056ddd65000000000000000000000000000000000000000000000000000000000000000000000000000
000000000faaaaaaaaaaaaa0005666666555555550000056ddd65000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ffffffffffff00dd56dd666566666650000056666650dd000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ff999999999900dd56dd6665666dd650000056666650dd000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ff999999999900dd5666666566ddd655555555566650dd000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ff999999999900dd56dd666566ddd65666666656665ddd555555555555555555555555555555555555555555555555555555555555555555555555
0000000000ff999999999900dd56dd66656666665666666656665ddd333333333333333333333333333333333333333333333333333333333333333333333333
0000000000ff999999999900dd566665555555555566dd6656665dddbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bb
0000000000ff999999999900dd56dd65666666666566dd6656665dddb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbb
0000000000ff999999999900dd56dd65666666666566666656665ddd3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb
0000000000ff999999999900dd5666656dd666dd6566dd6656665ddd333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3
0000000000ff999999999900dd56dd656dd666dd6566dd6656665ddd33bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb33
0000000000ff999999999900dd56dd65666666666566666656665ddd3bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb333
0000000000ff999999999900dd5666656dd666dd6566dd6656665dddbbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333
0000000000ff999999999900dd56dd656dd666dd6566dd6656665dddbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333bbbb3333b
000000000000000000000000dd56dd65666666666566666656665dddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
000000000000000000000000dd566665666666666566666656665ddd666666666666666666666666666666666666666666666666666666666666666666666666
000000000000000000000000dd555555555555555555555555555dddffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
00000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
00000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
00000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
00000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
00000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007777777000000000000000000000000000000000000777777700000000000000333333300000000000000000000000000000000000033333330000000
77000777777777770000000777770000000077777000000077777777777000773300033333333333000000033333000000003333300000003333333333300033
77777777777777777000007777777000000777777700000777777777777777773333333333333333300000333333300000033333330000033333333333333333
77777777777777777700777777777700007777777777007777777777777777773333333333333333330033333333330000333333333300333333333333333333
77777777777777777777777777777770077777777777777777777777777777773333333333333333333333333333333003333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
0000000000000000000000000000000000000000000000000000000000000000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000000000000000000000000000000000000000000000000000000000000000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000000000000000000000000000000000000000000000000000000000000000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000000777777700000000000000000000000000000000000077777770000000ccccccc3333333cccccccccccccccccccccccccccccccccccc3333333ccccccc
770007777777777700000007777700000000777770000000777777777770007733ccc33333333333ccccccc33333cccccccc33333ccccccc33333333333ccc33
777777777777777770000077777770000007777777000007777777777777777733333333333333333ccccc3333333cccccc3333333ccccc33333333333333333
7777777777777777770077777777770000777777777700777777777777777777333333333333333333cc3333333333cccc3333333333cc333333333333333333
77777777777777777777777777777770077777777777777777777777777777773333333333333333333333333333333cc3333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
77777777777777777777777777777777777777777777777777777777777777773333333333333333333333333333333333333333333333333333333333333333
